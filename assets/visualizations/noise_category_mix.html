<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Bokeh Plot</title>
    <style>
      html, body {
        box-sizing: border-box;
        display: flow-root;
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-3.6.3.min.js"></script>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.6.3.min.js"></script>
    <script type="text/javascript">
        Bokeh.set_log_level("info");
    </script>
  </head>
  <body>
    <div id="bab1e586-2c8b-448a-a75b-61b18103eae0" data-root-id="p1431" style="display: contents;"></div>
  
    <script type="application/json" id="d85e0714-9575-448d-9e92-2fe852bf4ed1">
      {"a049ea39-7529-4d2f-b86d-1835094310ad":{"version":"3.6.3","title":"Bokeh Application","roots":[{"type":"object","name":"Column","id":"p1431","attributes":{"children":[{"type":"object","name":"Div","id":"p1429","attributes":{"text":"&lt;h3&gt;Noise Type Sensitivity Map&lt;/h3&gt;&lt;p&gt;Select year and borough to explore the noise profile.&lt;/p&gt;"}},{"type":"object","name":"Row","id":"p1428","attributes":{"sizing_mode":"scale_width","children":[{"type":"object","name":"Select","id":"p1425","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:value",[{"type":"object","name":"CustomJS","id":"p1427","attributes":{"args":{"type":"map","entries":[["src",{"type":"object","name":"ColumnDataSource","id":"p1388","attributes":{"selected":{"type":"object","name":"Selection","id":"p1389","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1390"},"data":{"type":"map","entries":[["category",[["Manhattan","Street/Sidewalk"],["Manhattan","Residential"],["Manhattan","Noise"],["Manhattan","Vehicle"],["Manhattan","Commercial"]]],["count",[73830,72291,18512,17070,13147]]]}}}],["plot",{"type":"object","name":"Figure","id":"p1392","attributes":{"width":500,"height":350,"x_range":{"type":"object","name":"FactorRange","id":"p1391","attributes":{"factors":[["Manhattan","Street/Sidewalk"],["Manhattan","Residential"],["Manhattan","Noise"],["Manhattan","Vehicle"],["Manhattan","Commercial"]]}},"y_range":{"type":"object","name":"Range1d","id":"p1402","attributes":{"end":84904.5}},"x_scale":{"type":"object","name":"CategoricalScale","id":"p1403"},"y_scale":{"type":"object","name":"LinearScale","id":"p1404"},"title":{"type":"object","name":"Title","id":"p1395","attributes":{"text":"2020 Noise Category Mix (Top\u202f5)"}},"renderers":[{"type":"object","name":"GlyphRenderer","id":"p1421","attributes":{"data_source":{"id":"p1388"},"view":{"type":"object","name":"CDSView","id":"p1422","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p1423"}}},"glyph":{"type":"object","name":"VBar","id":"p1418","attributes":{"x":{"type":"field","field":"category"},"width":{"type":"value","value":0.7},"top":{"type":"field","field":"count"},"line_color":{"type":"value","value":"#1f77b4"},"fill_color":{"type":"value","value":"navy"}}},"nonselection_glyph":{"type":"object","name":"VBar","id":"p1419","attributes":{"x":{"type":"field","field":"category"},"width":{"type":"value","value":0.7},"top":{"type":"field","field":"count"},"line_color":{"type":"value","value":"#1f77b4"},"line_alpha":{"type":"value","value":0.1},"fill_color":{"type":"value","value":"navy"},"fill_alpha":{"type":"value","value":0.1},"hatch_alpha":{"type":"value","value":0.1}}},"muted_glyph":{"type":"object","name":"VBar","id":"p1420","attributes":{"x":{"type":"field","field":"category"},"width":{"type":"value","value":0.7},"top":{"type":"field","field":"count"},"line_color":{"type":"value","value":"#1f77b4"},"line_alpha":{"type":"value","value":0.2},"fill_color":{"type":"value","value":"navy"},"fill_alpha":{"type":"value","value":0.2},"hatch_alpha":{"type":"value","value":0.2}}}}}],"toolbar":{"type":"object","name":"Toolbar","id":"p1401"},"toolbar_location":null,"left":[{"type":"object","name":"LinearAxis","id":"p1410","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p1411","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p1412"},"axis_label":"Complaints","major_label_policy":{"type":"object","name":"AllLabels","id":"p1413"}}}],"below":[{"type":"object","name":"CategoricalAxis","id":"p1405","attributes":{"ticker":{"type":"object","name":"CategoricalTicker","id":"p1406"},"formatter":{"type":"object","name":"CategoricalTickFormatter","id":"p1407"},"axis_label":"Noise Category","major_label_orientation":1,"major_label_policy":{"type":"object","name":"AllLabels","id":"p1408"}}}],"center":[{"type":"object","name":"Grid","id":"p1409","attributes":{"axis":{"id":"p1405"}}},{"type":"object","name":"Grid","id":"p1414","attributes":{"dimension":1,"axis":{"id":"p1410"}}}]}}],["div",{"type":"object","name":"Div","id":"p1424","attributes":{"width":400,"height":120,"text":"&lt;b&gt;Dominant:&lt;/b&gt; ('Manhattan', 'Street/Sidewalk') (73,830)&lt;br&gt;&lt;b&gt;Biggest surge:&lt;/b&gt; ('Manhattan', 'Collection Truck Noise') ()&lt;br&gt;&lt;br&gt;Manhattan saw new ('Manhattan', 'Collection Truck Noise') in 2020 absent previously; ('Manhattan', 'Street/Sidewalk') remained dominant."}}],["cats",{"type":"map","entries":[["2019_Manhattan",[["Manhattan","Residential"],["Manhattan","Street/Sidewalk"],["Manhattan","Noise"],["Manhattan","Commercial"],["Manhattan","Vehicle"]]],["2019_Brooklyn",[["Brooklyn","Residential"],["Brooklyn","Street/Sidewalk"],["Brooklyn","Noise"],["Brooklyn","Commercial"],["Brooklyn","Vehicle"]]],["2019_Queens",[["Queens","Residential"],["Queens","Vehicle"],["Queens","Noise"],["Queens","Street/Sidewalk"],["Queens","Commercial"]]],["2019_Bronx",[["Bronx","Residential"],["Bronx","Street/Sidewalk"],["Bronx","Vehicle"],["Bronx","Commercial"],["Bronx","Noise"]]],["2019_Staten Island",[["Staten Island","Residential"],["Staten Island","Noise"],["Staten Island","Street/Sidewalk"],["Staten Island","Commercial"],["Staten Island","Vehicle"]]],["2020_Manhattan",[["Manhattan","Street/Sidewalk"],["Manhattan","Residential"],["Manhattan","Noise"],["Manhattan","Vehicle"],["Manhattan","Commercial"]]],["2020_Brooklyn",[["Brooklyn","Residential"],["Brooklyn","Street/Sidewalk"],["Brooklyn","Vehicle"],["Brooklyn","Commercial"],["Brooklyn","Noise"]]],["2020_Queens",[["Queens","Residential"],["Queens","Street/Sidewalk"],["Queens","Vehicle"],["Queens","Commercial"],["Queens","Noise"]]],["2020_Bronx",[["Bronx","Residential"],["Bronx","Street/Sidewalk"],["Bronx","Vehicle"],["Bronx","Commercial"],["Bronx","Noise"]]],["2020_Staten Island",[["Staten Island","Residential"],["Staten Island","Street/Sidewalk"],["Staten Island","Noise"],["Staten Island","Vehicle"],["Staten Island","Commercial"]]]]}],["cnts",{"type":"map","entries":[["2019_Manhattan",[50118,34413,24693,13663,9907]],["2019_Brooklyn",[66534,26450,14235,13861,10072]],["2019_Queens",[49820,13386,10704,9535,7718]],["2019_Bronx",[56855,24184,7783,4136,3088]],["2019_Staten Island",[7427,2917,1100,824,640]],["2020_Manhattan",[73830,72291,18512,17070,13147]],["2020_Brooklyn",[95539,44875,15907,12882,12371]],["2020_Queens",[76066,22744,20279,9957,9037]],["2020_Bronx",[150996,61931,26047,6722,3212]],["2020_Staten Island",[11266,2035,1575,1184,955]]]}],["dom",{"type":"map","entries":[["2019_Manhattan",["Manhattan","Residential"]],["2019_Brooklyn",["Brooklyn","Residential"]],["2019_Queens",["Queens","Residential"]],["2019_Bronx",["Bronx","Residential"]],["2019_Staten Island",["Staten Island","Residential"]],["2020_Manhattan",["Manhattan","Street/Sidewalk"]],["2020_Brooklyn",["Brooklyn","Residential"]],["2020_Queens",["Queens","Residential"]],["2020_Bronx",["Bronx","Residential"]],["2020_Staten Island",["Staten Island","Residential"]]]}],["dmc",{"type":"map","entries":[["2019_Manhattan",50118],["2019_Brooklyn",66534],["2019_Queens",49820],["2019_Bronx",56855],["2019_Staten Island",7427],["2020_Manhattan",73830],["2020_Brooklyn",95539],["2020_Queens",76066],["2020_Bronx",150996],["2020_Staten Island",11266]]}],["sc",{"type":"map","entries":[["2019_Manhattan",["Manhattan","Collection Truck Noise"]],["2019_Brooklyn",["Brooklyn","Collection Truck Noise"]],["2019_Queens",["Queens","Collection Truck Noise"]],["2019_Bronx",["Bronx","Collection Truck Noise"]],["2019_Staten Island",["Staten Island","Collection Truck Noise"]],["2020_Manhattan",["Manhattan","Collection Truck Noise"]],["2020_Brooklyn",["Brooklyn","Collection Truck Noise"]],["2020_Queens",["Queens","Collection Truck Noise"]],["2020_Bronx",["Bronx","Collection Truck Noise"]],["2020_Staten Island",["Staten Island","Collection Truck Noise"]]]}],["sp",{"type":"map","entries":[["2019_Manhattan",null],["2019_Brooklyn",null],["2019_Queens",null],["2019_Bronx",null],["2019_Staten Island",null],["2020_Manhattan",null],["2020_Brooklyn",null],["2020_Queens",null],["2020_Bronx",null],["2020_Staten Island",null]]}],["ins",{"type":"map","entries":[["2019_Manhattan","Manhattan saw new ('Manhattan', 'Collection Truck Noise') in 2019 absent previously; ('Manhattan', 'Residential') remained dominant."],["2019_Brooklyn","Brooklyn saw new ('Brooklyn', 'Collection Truck Noise') in 2019 absent previously; ('Brooklyn', 'Residential') remained dominant."],["2019_Queens","Queens saw new ('Queens', 'Collection Truck Noise') in 2019 absent previously; ('Queens', 'Residential') remained dominant."],["2019_Bronx","Bronx saw new ('Bronx', 'Collection Truck Noise') in 2019 absent previously; ('Bronx', 'Residential') remained dominant."],["2019_Staten Island","Staten Island saw new ('Staten Island', 'Collection Truck Noise') in 2019 absent previously; ('Staten Island', 'Residential') remained dominant."],["2020_Manhattan","Manhattan saw new ('Manhattan', 'Collection Truck Noise') in 2020 absent previously; ('Manhattan', 'Street/Sidewalk') remained dominant."],["2020_Brooklyn","Brooklyn saw new ('Brooklyn', 'Collection Truck Noise') in 2020 absent previously; ('Brooklyn', 'Residential') remained dominant."],["2020_Queens","Queens saw new ('Queens', 'Collection Truck Noise') in 2020 absent previously; ('Queens', 'Residential') remained dominant."],["2020_Bronx","Bronx saw new ('Bronx', 'Collection Truck Noise') in 2020 absent previously; ('Bronx', 'Residential') remained dominant."],["2020_Staten Island","Staten Island saw new ('Staten Island', 'Collection Truck Noise') in 2020 absent previously; ('Staten Island', 'Residential') remained dominant."]]}],["year_sel",{"id":"p1425"}],["boro_sel",{"type":"object","name":"Select","id":"p1426","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:value",[{"id":"p1427"}]]]},"width":150,"title":"Borough","options":["Manhattan","Brooklyn","Queens","Bronx","Staten Island"],"value":"Manhattan"}}]]},"code":"\n    const year = year_sel.value;\n    const boro = boro_sel.value;\n    const key = year + \"_\" + boro;\n    // update datasource\n    src.data['category'] = cats[key];\n    src.data['count']    = cnts[key];\n    src.change.emit();\n    // update axes\n    plot.x_range.factors = cats[key];\n    plot.y_range.end = Math.max(...cnts[key]) * 1.15;\n    // update title\n    plot.title.text = year + \" Noise Category Mix (Top\u00a05)\";\n    // update info\n    const surgeText = sp[key]===null ? '\u221e' : sp[key].toFixed(1)+'%\u2191';\n    div.text = `&lt;b&gt;Dominant:&lt;/b&gt; ${dom[key]} (${dmc[key].toLocaleString()})&lt;br&gt;`\n             + `&lt;b&gt;Biggest surge:&lt;/b&gt; ${sc[key]} (${surgeText})&lt;br&gt;&lt;br&gt;`\n             + ins[key];\n"}}]]]},"width":100,"title":"Year","options":["2019","2020"],"value":"2020"}},{"id":"p1426"}]}},{"type":"object","name":"Row","id":"p1430","attributes":{"children":[{"id":"p1392"},{"id":"p1424"}]}}]}}]}}
    </script>
    <script type="text/javascript">
      (function() {
        const fn = function() {
          Bokeh.safely(function() {
            (function(root) {
              function embed_document(root) {
              const docs_json = document.getElementById('d85e0714-9575-448d-9e92-2fe852bf4ed1').textContent;
              const render_items = [{"docid":"a049ea39-7529-4d2f-b86d-1835094310ad","roots":{"p1431":"bab1e586-2c8b-448a-a75b-61b18103eae0"},"root_ids":["p1431"]}];
              root.Bokeh.embed.embed_items(docs_json, render_items);
              }
              if (root.Bokeh !== undefined) {
                embed_document(root);
              } else {
                let attempts = 0;
                const timer = setInterval(function(root) {
                  if (root.Bokeh !== undefined) {
                    clearInterval(timer);
                    embed_document(root);
                  } else {
                    attempts++;
                    if (attempts > 100) {
                      clearInterval(timer);
                      console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
                    }
                  }
                }, 10, root)
              }
            })(window);
          });
        };
        if (document.readyState != "loading") fn();
        else document.addEventListener("DOMContentLoaded", fn);
      })();
    </script>
  </body>
</html>